<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户管理</title>
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom fonts for this template-->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/wwn.css">
</head>
<body>


<div class="container-fluid main">


    <div class="card">
        <div class="card-header">

            <i class="fa fa-table"></i>用户管理
        </div>

        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#users" aria-controls="home" role="tab"
                                                      data-toggle="tab">用户</a>
            </li>
            <li role="presentation"><a href="#jurisdiction" role="tab"
                                       data-toggle="tab">权限</a>
            </li>
            <li role="presentation"><a href="#role" role="tab"
                                       data-toggle="tab">角色</a></li>
        </ul>
        <div class="card-body" id="users">
            <div>
                <div class="bcard-header">
                    <div>
                        <button class="btn btn-default">增加</button>
                        <button class="btn btn-default">删除</button>
                        <button class="btn btn-default">修改</button>
                        <button class="btn btn-default">查询</button>
                    </div>
                    <div class="right">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <select class='form-control' name="">
                            <option value="">123</option>
                            <option value="">123</option>
                            <option value="">123</option>
                        </select>
                        <button class="btn btn-default">筛选</button>
                    </div>
                </div>
                <div class="bcard-body">
                    <table class="table table-bordered table-hover table-striped">
                    </table>
                </div>
            </div>
            <div class="bcard-foot">

            </div>
        </div>
        <div class="card-body" id="jurisdiction" style="display:none">
            <h1>jurisdiction</h1>

            <div>
                <div class="bcard-header">
                    <div>
                        <button class="btn btn-default">增加</button>
                        <button class="btn btn-default">删除</button>
                        <button class="btn btn-default">修改</button>
                        <button class="btn btn-default">查询</button>
                    </div>
                    <div class="right">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <select class='form-control' name="" id="">
                            <option value="">123</option>
                            <option value="">123</option>
                            <option value="">123</option>
                        </select>
                        <button class="btn btn-default">筛选</button>

                    </div>
                </div>

                <div class="bcard-body">
                    <table class="table table-bordered table-hover table-striped">
                        <tr>
                            <th>
                                1
                            </th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                            <th>6</th>
                            <th>7</th>
                            <th>8</th>
                            <th>9</th>
                            <th>10</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>

                    </table>
                </div>
            </div>
            <div class="bcard-foot">
                <div>没有符合条件的记录</div>
                <ul class="pagination">
                    <li>
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true">上一页</span>
                        </a>
                    </li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li>
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">下一页</span>
                        </a>
                    </li>
                </ul>

            </div>
        </div>
        <div class="card-body" id="role" style="display:none">
            <h1>role</h1>
            <div>
                <div class="bcard-header">
                    <div>
                        <button class="btn btn-default">增加</button>
                        <button class="btn btn-default">删除</button>
                        <button class="btn btn-default">修改</button>
                        <button class="btn btn-default">查询</button>
                    </div>
                    <div class="right">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <input class='form-control' type="text">
                        <span>啦啦</span>
                        <select class='form-control' name="">
                            <option value="">123</option>
                            <option value="">123</option>
                            <option value="">123</option>
                        </select>
                        <button class="btn btn-default">筛选</button>

                    </div>
                </div>

                <div class="bcard-body">
                    <table class="table table-bordered table-hover table-striped">
                        <tr>
                            <th>
                                1
                            </th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                            <th>6</th>
                            <th>7</th>
                            <th>8</th>
                            <th>9</th>
                            <th>10</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>

                    </table>
                </div>
            </div>
            <div class="bcard-foot">
                <div>没有符合条件的记录</div>
                <ul class="pagination">
                    <li>
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true">上一页</span>
                        </a>
                    </li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li>
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">下一页</span>
                        </a>
                    </li>
                </ul>

            </div>
        </div>
    </div>
</div>
<script src="../vendor/jquery/jquery.js"></script>
<script src="../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

<style>
    a.activ {
        background: #eee !important;
    }
</style>
<script>
    $(document).ready(function () {
        // 导航栏 菜单切换
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var target = $(e.target).attr('href').substr(1)
            $("#" + target).show();
            var relatedTarget = $(e.relatedTarget).attr('href').substr(1)
            $("#" + relatedTarget).hide();
        })

        init()
    })

    $('.table')
    //初始化请求
    user = {
        el: 'users',
        page: 1,
        url: 'http://127.0.0.1:8000/v1/users/user'
    }
    var init = function () {

        get_lists(user)
        console.log(11)
    }
    //获取列表
    var get_lists = function (obj) {
        $.ajax({
            url: obj.url + '?page=' + obj.page,
            type: 'get',
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            // data: JSON.stringify({'id': arr}),
            success: function (req) {
                if (req.code == '200') {
                    create_table(req, obj)
                    create_page(req, obj)
                } else {
                    alert(req.error)
                }
            },
            error: function (q, w, e) {
                console.log(q, w, e)
            }
        })

    }
    //创建表格
    var create_table = function (req, obj) {
        arr = [`<tr>
                            <th> </th>
                            <th>编号</th>
                            <th>昵称</th>
                            <th>登录名称</th>
                            <th>密码</th>
                            <th>登录时间</th>
                        </tr>`]
        for (var i = 0; i < req.data.length; i++) {
            arr.push(`<tr>
                            <td><input type="checkbox" name="favorite" value="${req.data[i].id}" /></td>
                            <td>${req.data[i].id}</td>
                            <td>${req.data[i].vname}</td>
                            <td>${req.data[i].lname}</td>
                            <td>${req.data[i].pwd}</td>
                            <td>${req.data[i].ctime}</td>
                        </tr>`)
        }
        $(`#${obj.el} table`).html(arr.join(''))
    }
    //分页链接
    var create_page = function (req, obj) {
        arr = ['<div></div><ul class="pagination">']
        if (req.current > 1) {
            str1 = `<li>
                    <a href="#" aria-label="Previous" onclick="set_page(${req.current - 1},'user',-4)">
                        <span aria-hidden="true">上一页</span>
                    </a>
                </li>`
        } else {
            str1 = `<li>
                    <a class="activ" href="#" aria-label="Previous" >
                        <span aria-hidden="true">上一页</span>
                    </a>
                </li>`
        }
        arr.push(str1)
        for (var a = 0; a < req.pages; a++) {
            if (req.current == a + 1) {
                arr.push(`<li><a class="activ" >${a + 1}</a></li>`)
            } else {
                arr.push(`<li><a  href="#"  onclick="set_page(${a + 1},'user',0)">${a + 1}</a></li>`)
            }
        }
        if (req.current < req.pages) {
            str2 = `<li>
                        <a href="#" aria-label="Previous"  onclick="set_page(${req.current + 1},'user',1)">
                            <span aria-hidden="true">下一页</span>
                        </a>
                    </li></ul>`
        } else {
            str2 = `<li>
                        <a  class="activ" href="#" aria-label="Previous" page="${req.current - 1}">
                           <span aria-hidden="true">下一页</span>
                        </a>
                    </li></ul>`
        }
        arr.push(str2)
        $(`#${obj.el} .bcard-foot`).html(arr.join(''))

    }
    var set_page = function (page, obj, type = 0) {
        obj = window['user']
        if (type == 1) {
            obj.page += 1
        } else if (type == -1) {
            obj.page - 1
        } else {
            obj.page = page
        }

        console.log(obj.page)
        get_lists(obj)
    }
</script>
</body>
</html>







